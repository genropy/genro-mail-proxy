# Dovecot 2.4.0 configuration for bounce detection testing
dovecot_config_version = 2.4.0
dovecot_storage_version = 2.4.0

# Protocols
protocols = imap

# Logging - use syslog (default)
auth_verbose = yes

# Disable SSL for testing
ssl = no

# Allow plaintext auth (testing only!)
auth_allow_cleartext = yes
auth_mechanisms = plain login

# Use vmail user for mail processes (Dovecot 2.4 requires non-root)
default_login_user = vmail
default_internal_user = vmail
default_internal_group = vmail

# Password database - passwd-file (Dovecot 2.4 syntax)
passdb passwd-file {
  passwd_file_path = /etc/dovecot/users
  default_password_scheme = PLAIN
}

# User database - passwd-file (Dovecot 2.4 syntax)
userdb passwd-file {
  passwd_file_path = /etc/dovecot/users
  fields {
    uid:default = 1000
    gid:default = 1000
    home:default = /srv/vmail/%{user}
  }
}

# Mail location (Dovecot 2.4 syntax)
mail_driver = maildir
mail_path = /srv/vmail/%{user}

# Namespace
namespace inbox {
  inbox = yes
  separator = /
}

# IMAP service - listen on custom port
service imap-login {
  inet_listener imap {
    port = 31143
  }
}

# First valid UID/GID (vmail user is 1000)
first_valid_uid = 1000
first_valid_gid = 1000
